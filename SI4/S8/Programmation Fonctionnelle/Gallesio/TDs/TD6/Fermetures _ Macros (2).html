<!DOCTYPE html>
<!-- saved from url=(0063)http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="author" content="Erick Gallesio">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <meta name="robots" content="none">
    <meta name="generator" content="Gomd 3.1-beta / Erick Gallesio">

     <!-- W3css  "https://www.w3schools.com/lib/w3.css" -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}progress{vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}dfn{font-style:italic}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}figure{margin:1em 40px}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}hr{box-sizing:content-box;height:0;overflow:visible}button,input,select,textarea{font:inherit;margin:0}optgroup{font-weight:bold}button,input{overflow:visible}button,select{text-transform:none}button,html [type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:.35em .625em .75em}legend{color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:0.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html,body{font-family:Verdana,sans-serif;font-size:15px;line-height:1.5}html{overflow-x:hidden}h1,h2,h3,h4,h5,h6,.w3-slim,.w3-wide{font-family:"Segoe UI",Arial,sans-serif}h1{font-size:36px}h2{font-size:30px}h3{font-size:24px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}.w3-serif{font-family:"Times New Roman",Times,serif}h1,h2,h3,h4,h5,h6{font-weight:400;margin:10px 0}.w3-wide{letter-spacing:4px}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{font-weight:inherit}hr{border:0;border-top:1px solid #eee;margin:20px 0}img{margin-bottom:-5px}a{color:inherit}.w3-image{max-width:100%;height:auto}.w3-table,.w3-table-all{border-collapse:collapse;border-spacing:0;width:100%;display:table}.w3-table-all{border:1px solid #ccc}.w3-bordered tr,.w3-table-all tr{border-bottom:1px solid #ddd}.w3-striped tbody tr:nth-child(even){background-color:#f1f1f1}.w3-table-all tr:nth-child(odd){background-color:#fff}.w3-table-all tr:nth-child(even){background-color:#f1f1f1}.w3-hoverable tbody tr:hover,.w3-ul.w3-hoverable li:hover{background-color:#ccc}.w3-centered tr th,.w3-centered tr td{text-align:center}.w3-table td,.w3-table th,.w3-table-all td,.w3-table-all th{padding:8px 8px;display:table-cell;text-align:left;vertical-align:top}.w3-table th:first-child,.w3-table td:first-child,.w3-table-all th:first-child,.w3-table-all td:first-child{padding-left:16px}.w3-btn,.w3-btn-block,.w3-button{border:none;display:inline-block;outline:0;padding:6px 16px;vertical-align:middle;overflow:hidden;text-decoration:none!important;color:#fff;background-color:#000;text-align:center;cursor:pointer;white-space:nowrap}.w3-btn:hover,.w3-btn-block:hover,.w3-btn-floating:hover,.w3-btn-floating-large:hover{box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}.w3-button{color:#000;background-color:#f1f1f1;padding:8px 16px}.w3-button:hover{color:#000!important;background-color:#ccc!important}.w3-btn,.w3-btn-floating,.w3-btn-floating-large,.w3-closenav,.w3-opennav,.w3-btn-block,.w3-button{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none} .w3-btn-floating,.w3-btn-floating-large{display:inline-block;text-align:center;color:#fff;background-color:#000;position:relative;overflow:hidden;z-index:1;padding:0;border-radius:50%;cursor:pointer;font-size:24px}.w3-btn-floating{width:40px;height:40px;line-height:40px}.w3-btn-floating-large{width:56px;height:56px;line-height:56px}.w3-disabled,.w3-btn:disabled,.w3-button:disabled,.w3-btn-floating:disabled,.w3-btn-floating-large:disabled{cursor:not-allowed;opacity:0.3}.w3-disabled *,:disabled *{pointer-events:none}.w3-btn.w3-disabled:hover,.w3-btn-block.w3-disabled:hover,.w3-btn:disabled:hover,.w3-btn-floating.w3-disabled:hover,.w3-btn-floating:disabled:hover,.w3-btn-floating-large.w3-disabled:hover,.w3-btn-floating-large:disabled:hover{box-shadow:none}.w3-btn-group .w3-btn{float:left}.w3-btn-block{width:100%}.w3-btn-bar .w3-btn{box-shadow:none;background-color:inherit;color:inherit;float:left}.w3-btn-bar .w3-btn:hover{background-color:#ccc}.w3-badge,.w3-tag,.w3-sign{background-color:#000;color:#fff;display:inline-block;padding-left:8px;padding-right:8px;text-align:center}.w3-badge{border-radius:50%}ul.w3-ul{list-style-type:none;padding:0;margin:0}ul.w3-ul li{padding:6px 2px 6px 16px;border-bottom:1px solid #ddd}ul.w3-ul li:last-child{border-bottom:none}.w3-tooltip,.w3-display-container{position:relative}.w3-tooltip .w3-text{display:none}.w3-tooltip:hover .w3-text{display:inline-block}.w3-navbar{list-style-type:none;margin:0;padding:0;overflow:hidden}.w3-navbar li{float:left}.w3-navbar li a,.w3-navitem,.w3-navbar li .w3-btn,.w3-navbar li .w3-input{display:block;padding:8px 16px}.w3-navbar li .w3-btn,.w3-navbar li .w3-input{border:none;outline:none;width:100%}.w3-navbar li a:hover{color:#000;background-color:#ccc}.w3-navbar .w3-dropdown-hover,.w3-navbar .w3-dropdown-click{position:static}.w3-navbar .w3-dropdown-hover:hover,.w3-navbar .w3-dropdown-hover:first-child,.w3-navbar .w3-dropdown-click:hover{background-color:#ccc;color:#000}.w3-navbar a,.w3-topnav a,.w3-sidenav a,.w3-dropdown-content a,.w3-accordion-content a,.w3-dropnav a,.w3-navblock a{text-decoration:none!important}.w3-navbar .w3-opennav.w3-right{float:right!important}.w3-topnav{padding:8px 8px}.w3-navblock .w3-dropdown-hover:hover,.w3-navblock .w3-dropdown-hover:first-child,.w3-navblock .w3-dropdown-click:hover{background-color:#ccc;color:#000}.w3-navblock .w3-dropdown-hover,.w3-navblock .w3-dropdown-click{width:100%}.w3-navblock .w3-dropdown-hover .w3-dropdown-content,.w3-navblock .w3-dropdown-click .w3-dropdown-content{min-width:100%}.w3-topnav a{padding:0 8px;border-bottom:3px solid transparent;-webkit-transition:border-bottom .25s;transition:border-bottom .25s}.w3-topnav a:hover{border-bottom:3px solid #fff}.w3-topnav .w3-dropdown-hover a{border-bottom:0}.w3-opennav,.w3-closenav{color:inherit}.w3-opennav:hover,.w3-closenav:hover{cursor:pointer;opacity:0.8}.w3-btn,.w3-btn-floating,.w3-dropnav a,.w3-btn-floating-large,.w3-btn-block, .w3-navbar a,.w3-navblock a,.w3-sidenav a,.w3-pagination li a,.w3-hoverable tbody tr,.w3-hoverable li,.w3-accordion-content a,.w3-dropdown-content a,.w3-dropdown-click:hover,.w3-dropdown-hover:hover,.w3-opennav,.w3-closenav,.w3-closebtn,*[class*="w3-hover-"]{-webkit-transition:background-color .25s,color .15s,box-shadow .25s,opacity 0.25s,filter 0.25s,border 0.15s;transition:background-color .25s,color .15s,box-shadow .15s,opacity .25s,filter .25s,border .15s}.w3-ripple:active{opacity:0.5}.w3-ripple{-webkit-transition:opacity 0s;transition:opacity 0s}.w3-sidenav,.w3-sidebar{height:100%;width:200px;background-color:#fff;position:fixed!important;z-index:1;overflow:auto}.w3-sidenav a,.w3-navblock a{padding:4px 2px 4px 16px}.w3-sidenav a:hover,.w3-navblock a:hover{background-color:#ccc;color:#000}.w3-sidenav a,.w3-dropnav a,.w3-navblock a{display:block}.w3-sidenav .w3-dropdown-hover:hover,.w3-sidenav .w3-dropdown-hover:first-child,.w3-sidenav .w3-dropdown-click:hover,.w3-dropnav a:hover{background-color:#ccc;color:#000}.w3-sidenav .w3-dropdown-hover,.w3-sidenav .w3-dropdown-click,.w3-bar-block .w3-dropdown-hover,.w3-bar-block .w3-dropdown-click{width:100%}.w3-sidenav .w3-dropdown-hover .w3-dropdown-content,.w3-sidenav .w3-dropdown-click .w3-dropdown-content,.w3-bar-block .w3-dropdown-hover .w3-dropdown-content,.w3-bar-block .w3-dropdown-click .w3-dropdown-content{min-width:100%}.w3-bar-block .w3-dropdown-hover .w3-button,.w3-bar-block .w3-dropdown-click .w3-button{width:100%;text-align:left;background-color:inherit;color:inherit;padding:6px 2px 6px 16px}.w3-main,#main{transition:margin-left .4s}.w3-modal{z-index:3;display:none;padding-top:100px;position:fixed;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgb(0,0,0);background-color:rgba(0,0,0,0.4)}.w3-modal-content{margin:auto;background-color:#fff;position:relative;padding:0;outline:0;width:600px}.w3-closebtn{text-decoration:none;float:right;font-size:24px;font-weight:bold;color:inherit}.w3-closebtn:hover,.w3-closebtn:focus{color:#000;text-decoration:none;cursor:pointer}.w3-pagination{display:inline-block;padding:0;margin:0}.w3-pagination li{display:inline}.w3-pagination li a{text-decoration:none;color:#000;float:left;padding:8px 16px}.w3-pagination li a:hover{background-color:#ccc}.w3-input-group,.w3-group{margin-top:24px;margin-bottom:24px}.w3-input{padding:8px;display:block;border:none;border-bottom:1px solid #808080;width:100%}.w3-label{color:#009688}.w3-input:not(:valid)~.w3-validate{color:#f44336}.w3-select{padding:9px 0;width:100%;color:#000;border:1px solid transparent;border-bottom:1px solid #009688}.w3-select select:focus{color:#000;border:1px solid #009688}.w3-select option[disabled]{color:#009688}.w3-dropdown-click,.w3-dropdown-hover{position:relative;display:inline-block;cursor:pointer}.w3-dropdown-hover:hover .w3-dropdown-content{display:block;z-index:1}.w3-dropdown-hover:first-child,.w3-dropdown-click:hover{background-color:#ccc;color:#000}.w3-dropdown-hover:hover > .w3-button:first-child,.w3-dropdown-click:hover > .w3-button:first-child{background-color:#ccc;color:#000}.w3-dropdown-content{cursor:auto;color:#000;background-color:#fff;display:none;position:absolute;min-width:160px;margin:0;padding:0}.w3-dropdown-content a{padding:6px 16px;display:block}.w3-dropdown-content a:hover{background-color:#ccc}.w3-accordion{width:100%;cursor:pointer}.w3-accordion-content{cursor:auto;display:none;position:relative;width:100%;margin:0;padding:0}.w3-accordion-content a{padding:6px 16px;display:block}.w3-accordion-content a:hover{background-color:#ccc}.w3-progress-container{width:100%;height:1.5em;position:relative;background-color:#f1f1f1}.w3-progressbar{background-color:#757575;height:100%;position:absolute;line-height:inherit}input[type=checkbox].w3-check,input[type=radio].w3-radio{width:24px;height:24px;position:relative;top:6px}input[type=checkbox].w3-check:checked+.w3-validate,input[type=radio].w3-radio:checked+.w3-validate{color:#009688} input[type=checkbox].w3-check:disabled+.w3-validate,input[type=radio].w3-radio:disabled+.w3-validate{color:#aaa}.w3-bar{width:100%;overflow:hidden}.w3-center .w3-bar{display:inline-block;width:auto}.w3-bar .w3-bar-item{padding:8px 16px;float:left;background-color:inherit;color:inherit;width:auto;border:none;outline:none;display:block}.w3-bar .w3-dropdown-hover,.w3-bar .w3-dropdown-click{position:static;float:left}.w3-bar .w3-button{background-color:inherit;color:inherit;white-space:normal}.w3-bar-block .w3-bar-item{width:100%;display:block;padding:8px 16px;text-align:left;background-color:inherit;color:inherit;border:none;outline:none;white-space:normal}.w3-bar-block.w3-center .w3-bar-item{text-align:center}.w3-block{display:block;width:100%}.w3-responsive{overflow-x:auto}.w3-container:after,.w3-container:before,.w3-panel:after,.w3-panel:before,.w3-row:after,.w3-row:before,.w3-row-padding:after,.w3-row-padding:before,.w3-cell-row:before,.w3-cell-row:after,.w3-topnav:after,.w3-topnav:before,.w3-clear:after,.w3-clear:before,.w3-btn-group:before,.w3-btn-group:after,.w3-btn-bar:before,.w3-btn-bar:after,.w3-bar:before,.w3-bar:after{content:"";display:table;clear:both}.w3-col,.w3-half,.w3-third,.w3-twothird,.w3-threequarter,.w3-quarter{float:left;width:100%}.w3-col.s1{width:8.33333%}.w3-col.s2{width:16.66666%}.w3-col.s3{width:24.99999%}.w3-col.s4{width:33.33333%}.w3-col.s5{width:41.66666%}.w3-col.s6{width:49.99999%}.w3-col.s7{width:58.33333%}.w3-col.s8{width:66.66666%}.w3-col.s9{width:74.99999%}.w3-col.s10{width:83.33333%}.w3-col.s11{width:91.66666%}.w3-col.s12,.w3-half,.w3-third,.w3-twothird,.w3-threequarter,.w3-quarter{width:99.99999%}@media (min-width:601px){.w3-col.m1{width:8.33333%}.w3-col.m2{width:16.66666%}.w3-col.m3,.w3-quarter{width:24.99999%}.w3-col.m4,.w3-third{width:33.33333%}.w3-col.m5{width:41.66666%}.w3-col.m6,.w3-half{width:49.99999%}.w3-col.m7{width:58.33333%}.w3-col.m8,.w3-twothird{width:66.66666%}.w3-col.m9,.w3-threequarter{width:74.99999%}.w3-col.m10{width:83.33333%}.w3-col.m11{width:91.66666%}.w3-col.m12{width:99.99999%}}@media (min-width:993px){.w3-col.l1{width:8.33333%}.w3-col.l2{width:16.66666%}.w3-col.l3,.w3-quarter{width:24.99999%}.w3-col.l4,.w3-third{width:33.33333%}.w3-col.l5{width:41.66666%}.w3-col.l6,.w3-half{width:49.99999%}.w3-col.l7{width:58.33333%}.w3-col.l8,.w3-twothird{width:66.66666%}.w3-col.l9,.w3-threequarter{width:74.99999%}.w3-col.l10{width:83.33333%}.w3-col.l11{width:91.66666%}.w3-col.l12{width:99.99999%}}.w3-content{max-width:980px;margin:auto}.w3-rest{overflow:hidden}.w3-layout-container,.w3-cell-row{display:table;width:100%}.w3-layout-row{display:table-row}.w3-layout-cell,.w3-layout-col,.w3-cell{display:table-cell}.w3-layout-top,.w3-cell-top{vertical-align:top}.w3-layout-middle,.w3-cell-middle{vertical-align:middle}.w3-layout-bottom,.w3-cell-bottom{vertical-align:bottom}.w3-hide{display:none!important}.w3-show-block,.w3-show{display:block!important}.w3-show-inline-block{display:inline-block!important}@media (max-width:600px){.w3-modal-content{margin:0 10px;width:auto!important}.w3-modal{padding-top:30px}.w3-topnav a{display:block}.w3-navbar li:not(.w3-opennav){float:none;width:100%!important}.w3-navbar li.w3-right{float:none!important}.w3-topnav .w3-dropdown-hover .w3-dropdown-content,.w3-navbar .w3-dropdown-click .w3-dropdown-content,.w3-navbar .w3-dropdown-hover .w3-dropdown-content,.w3-dropdown-hover.w3-mobile .w3-dropdown-content,.w3-dropdown-click.w3-mobile .w3-dropdown-content{position:relative}    .w3-topnav,.w3-navbar{text-align:center}.w3-hide-small{display:none!important}.w3-layout-col,.w3-mobile{display:block;width:100%!important}.w3-bar-item.w3-mobile,.w3-dropdown-hover.w3-mobile,.w3-dropdown-click.w3-mobile{text-align:center}.w3-dropdown-hover.w3-mobile,.w3-dropdown-hover.w3-mobile .w3-btn,.w3-dropdown-hover.w3-mobile .w3-button,.w3-dropdown-click.w3-mobile,.w3-dropdown-click.w3-mobile .w3-btn,.w3-dropdown-click.w3-mobile .w3-button{width:100%}}@media (max-width:768px){.w3-modal-content{width:500px}.w3-modal{padding-top:50px}}@media (min-width:993px){.w3-modal-content{width:900px}.w3-hide-large{display:none!important}.w3-sidenav.w3-collapse,.w3-sidebar.w3-collapse{display:block!important}}@media (max-width:992px) and (min-width:601px){.w3-hide-medium{display:none!important}}@media (max-width:992px){.w3-sidenav.w3-collapse,.w3-sidebar.w3-collapse{display:none}.w3-main{margin-left:0!important;margin-right:0!important}}.w3-top,.w3-bottom{position:fixed;width:100%;z-index:1}.w3-top{top:0}.w3-bottom{bottom:0}.w3-overlay{position:fixed;display:none;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.5);z-index:2}.w3-left{float:left!important}.w3-right{float:right!important}.w3-tiny{font-size:10px!important}.w3-small{font-size:12px!important}.w3-medium{font-size:15px!important}.w3-large{font-size:18px!important}.w3-xlarge{font-size:24px!important}.w3-xxlarge{font-size:36px!important}.w3-xxxlarge{font-size:48px!important}.w3-jumbo{font-size:64px!important}.w3-vertical{word-break:break-all;line-height:1;text-align:center;width:0.6em}.w3-left-align{text-align:left!important}.w3-right-align{text-align:right!important}.w3-justify{text-align:justify!important}.w3-center{text-align:center!important}.w3-display-topleft{position:absolute;left:0;top:0}.w3-display-topright{position:absolute;right:0;top:0}.w3-display-bottomleft{position:absolute;left:0;bottom:0}.w3-display-bottomright{position:absolute;right:0;bottom:0}.w3-display-middle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%)}.w3-display-left{position:absolute;top:50%;left:0%;transform:translate(0%,-50%);-ms-transform:translate(-0%,-50%)}.w3-display-right{position:absolute;top:50%;right:0%;transform:translate(0%,-50%);-ms-transform:translate(0%,-50%)}.w3-display-topmiddle{position:absolute;left:50%;top:0;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}.w3-display-bottommiddle{position:absolute;left:50%;bottom:0;transform:translate(-50%,0%);-ms-transform:translate(-50%,0%)}.w3-display-container:hover .w3-display-hover{display:block}.w3-display-container:hover span.w3-display-hover{display:inline-block}.w3-display-hover{display:none}.w3-display-position{position:absolute}.w3-circle{border-radius:50%!important}.w3-round-small{border-radius:2px!important}.w3-round,.w3-round-medium{border-radius:4px!important}.w3-round-large{border-radius:8px!important}.w3-round-xlarge{border-radius:16px!important}.w3-round-xxlarge{border-radius:32px!important}.w3-round-jumbo{border-radius:64px!important}.w3-border-0{border:0!important}.w3-border{border:1px solid #ccc!important}.w3-border-top{border-top:1px solid #ccc!important}.w3-border-bottom{border-bottom:1px solid #ccc!important}.w3-border-left{border-left:1px solid #ccc!important}.w3-border-right{border-right:1px solid #ccc!important}.w3-margin{margin:16px!important}.w3-margin-0{margin:0!important}.w3-margin-top{margin-top:16px!important}.w3-margin-bottom{margin-bottom:16px!important}.w3-margin-left{margin-left:16px!important}.w3-margin-right{margin-right:16px!important}.w3-section{margin-top:16px!important;margin-bottom:16px!important}.w3-padding-tiny{padding:2px 4px!important}.w3-padding-small{padding:4px 8px!important}.w3-padding-medium,.w3-padding,.w3-form{padding:8px 16px!important}.w3-padding-large{padding:12px 24px!important}.w3-padding-xlarge{padding:16px 32px!important}.w3-padding-xxlarge{padding:24px 48px!important}.w3-padding-jumbo{padding:32px 64px!important}.w3-padding-4{padding-top:4px!important;padding-bottom:4px!important}.w3-padding-8{padding-top:8px!important;padding-bottom:8px!important}.w3-padding-12{padding-top:12px!important;padding-bottom:12px!important}.w3-padding-16{padding-top:16px!important;padding-bottom:16px!important}.w3-padding-24{padding-top:24px!important;padding-bottom:24px!important}.w3-padding-32{padding-top:32px!important;padding-bottom:32px!important}.w3-padding-48{padding-top:48px!important;padding-bottom:48px!important}.w3-padding-64{padding-top:64px!important;padding-bottom:64px!important}.w3-padding-128{padding-top:128px!important;padding-bottom:128px!important}.w3-padding-0{padding:0!important}.w3-padding-top{padding-top:8px!important}.w3-padding-bottom{padding-bottom:8px!important}.w3-padding-left{padding-left:16px!important}.w3-padding-right{padding-right:16px!important}.w3-topbar{border-top:6px solid #ccc!important}.w3-bottombar{border-bottom:6px solid #ccc!important}.w3-leftbar{border-left:6px solid #ccc!important}.w3-rightbar{border-right:6px solid #ccc!important}.w3-row-padding,.w3-row-padding>.w3-half,.w3-row-padding>.w3-third,.w3-row-padding>.w3-twothird,.w3-row-padding>.w3-threequarter,.w3-row-padding>.w3-quarter,.w3-row-padding>.w3-col{padding:0 8px}.w3-spin{animation:w3-spin 2s infinite linear;-webkit-animation:w3-spin 2s infinite linear}@-webkit-keyframes w3-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes w3-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.w3-container{padding:0.01em 16px}.w3-panel{padding:0.01em 16px;margin-top:16px!important;margin-bottom:16px!important}.w3-example{background-color:#f1f1f1;padding:0.01em 16px}.w3-code,.w3-codespan{font-family:Consolas,"courier new";font-size:16px}.w3-code{line-height:1.4;width:auto;background-color:#fff;padding:8px 12px;border-left:4px solid #4CAF50;word-wrap:break-word}.w3-codespan{color:crimson;background-color:#f1f1f1;padding-left:4px;padding-right:4px;font-size:110%}.w3-example,.w3-code{margin:20px 0}.w3-card{border:1px solid #ccc}.w3-card-2,.w3-example{box-shadow:0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important}.w3-card-4,.w3-hover-shadow:hover{box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)!important}.w3-card-8{box-shadow:0 8px 16px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)!important}.w3-card-12{box-shadow:0 12px 16px 0 rgba(0,0,0,0.24),0 17px 50px 0 rgba(0,0,0,0.19)!important}.w3-card-16{box-shadow:0 16px 24px 0 rgba(0,0,0,0.22),0 25px 55px 0 rgba(0,0,0,0.21)!important}.w3-card-24{box-shadow:0 24px 24px 0 rgba(0,0,0,0.2),0 40px 77px 0 rgba(0,0,0,0.22)!important}.w3-animate-fading{-webkit-animation:fading 10s infinite;animation:fading 10s infinite}@-webkit-keyframes fading{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes fading{0%{opacity:0}50%{opacity:1}100%{opacity:0}}.w3-animate-opacity{-webkit-animation:opac 0.8s;animation:opac 0.8s}@-webkit-keyframes opac{from{opacity:0} to{opacity:1}}@keyframes opac{from{opacity:0} to{opacity:1}}.w3-animate-top{position:relative;-webkit-animation:animatetop 0.4s;animation:animatetop 0.4s}@-webkit-keyframes animatetop{from{top:-300px;opacity:0} to{top:0;opacity:1}}@keyframes animatetop{from{top:-300px;opacity:0} to{top:0;opacity:1}}.w3-animate-left{position:relative;-webkit-animation:animateleft 0.4s;animation:animateleft 0.4s}@-webkit-keyframes animateleft{from{left:-300px;opacity:0} to{left:0;opacity:1}}@keyframes animateleft{from{left:-300px;opacity:0} to{left:0;opacity:1}}.w3-animate-right{position:relative;-webkit-animation:animateright 0.4s;animation:animateright 0.4s}@-webkit-keyframes animateright{from{right:-300px;opacity:0} to{right:0;opacity:1}}@keyframes animateright{from{right:-300px;opacity:0} to{right:0;opacity:1}}.w3-animate-bottom{position:relative;-webkit-animation:animatebottom 0.4s;animation:animatebottom 0.4s}@-webkit-keyframes animatebottom{from{bottom:-300px;opacity:0} to{bottom:0px;opacity:1}}@keyframes animatebottom{from{bottom:-300px;opacity:0} to{bottom:0;opacity:1}}.w3-animate-zoom {-webkit-animation:animatezoom 0.6s;animation:animatezoom 0.6s}@-webkit-keyframes animatezoom{from{-webkit-transform:scale(0)} to{-webkit-transform:scale(1)}}@keyframes animatezoom{from{transform:scale(0)} to{transform:scale(1)}}.w3-animate-input{-webkit-transition:width 0.4s ease-in-out;transition:width 0.4s ease-in-out}.w3-animate-input:focus{width:100%!important}.w3-opacity,.w3-hover-opacity:hover{opacity:0.60;-webkit-backface-visibility:hidden}.w3-opacity-off,.w3-hover-opacity-off:hover{opacity:1;-webkit-backface-visibility:hidden}.w3-opacity-max{opacity:0.25;-webkit-backface-visibility:hidden}.w3-opacity-min{opacity:0.75;-webkit-backface-visibility:hidden}.w3-greyscale-max,.w3-grayscale-max,.w3-hover-greyscale:hover,.w3-hover-grayscale:hover{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.w3-greyscale,.w3-grayscale{-webkit-filter:grayscale(75%);filter:grayscale(75%)}.w3-greyscale-min,.w3-grayscale-min{-webkit-filter:grayscale(50%);filter:grayscale(50%)}.w3-sepia{-webkit-filter:sepia(75%);filter:sepia(75%)}.w3-sepia-max,.w3-hover-sepia:hover{-webkit-filter:sepia(100%);filter:sepia(100%)}.w3-sepia-min{-webkit-filter:sepia(50%);filter:sepia(50%)}.w3-text-shadow{text-shadow:1px 1px 0 #444}.w3-text-shadow-white{text-shadow:1px 1px 0 #ddd}.w3-transparent{background-color:transparent!important}.w3-hover-none:hover{box-shadow:none!important;background-color:transparent!important}.w3-amber,.w3-hover-amber:hover{color:#000!important;background-color:#ffc107!important}.w3-aqua,.w3-hover-aqua:hover{color:#000!important;background-color:#00ffff!important}.w3-blue,.w3-hover-blue:hover{color:#fff!important;background-color:#2196F3!important}.w3-light-blue,.w3-hover-light-blue:hover{color:#000!important;background-color:#87CEEB!important}.w3-brown,.w3-hover-brown:hover{color:#fff!important;background-color:#795548!important}.w3-cyan,.w3-hover-cyan:hover{color:#000!important;background-color:#00bcd4!important}.w3-blue-grey,.w3-hover-blue-grey:hover,.w3-blue-gray,.w3-hover-blue-gray:hover{color:#fff!important;background-color:#607d8b!important}.w3-green,.w3-hover-green:hover{color:#fff!important;background-color:#4CAF50!important}.w3-light-green,.w3-hover-light-green:hover{color:#000!important;background-color:#8bc34a!important}.w3-indigo,.w3-hover-indigo:hover{color:#fff!important;background-color:#3f51b5!important}.w3-khaki,.w3-hover-khaki:hover{color:#000!important;background-color:#f0e68c!important}.w3-lime,.w3-hover-lime:hover{color:#000!important;background-color:#cddc39!important}.w3-orange,.w3-hover-orange:hover{color:#000!important;background-color:#ff9800!important}.w3-deep-orange,.w3-hover-deep-orange:hover{color:#fff!important;background-color:#ff5722!important}.w3-pink,.w3-hover-pink:hover{color:#fff!important;background-color:#e91e63!important}.w3-purple,.w3-hover-purple:hover{color:#fff!important;background-color:#9c27b0!important}.w3-deep-purple,.w3-hover-deep-purple:hover{color:#fff!important;background-color:#673ab7!important}.w3-red,.w3-hover-red:hover{color:#fff!important;background-color:#f44336!important}.w3-sand,.w3-hover-sand:hover{color:#000!important;background-color:#fdf5e6!important}.w3-teal,.w3-hover-teal:hover{color:#fff!important;background-color:#009688!important}.w3-yellow,.w3-hover-yellow:hover{color:#000!important;background-color:#ffeb3b!important}.w3-white,.w3-hover-white:hover{color:#000!important;background-color:#fff!important}.w3-black,.w3-hover-black:hover{color:#fff!important;background-color:#000!important}.w3-grey,.w3-hover-grey:hover,.w3-gray,.w3-hover-gray:hover{color:#000!important;background-color:#9e9e9e!important}.w3-light-grey,.w3-hover-light-grey:hover,.w3-light-gray,.w3-hover-light-gray:hover{color:#000!important;background-color:#f1f1f1!important}.w3-dark-grey,.w3-hover-dark-grey:hover,.w3-dark-gray,.w3-hover-dark-gray:hover{color:#fff!important;background-color:#616161!important}.w3-pale-red,.w3-hover-pale-red:hover{color:#000!important;background-color:#ffdddd!important}.w3-pale-green,.w3-hover-pale-green:hover{color:#000!important;background-color:#ddffdd!important}.w3-pale-yellow,.w3-hover-pale-yellow:hover{color:#000!important;background-color:#ffffcc!important}.w3-pale-blue,.w3-hover-pale-blue:hover{color:#000!important;background-color:#ddffff!important}.w3-text-amber,.w3-hover-text-amber:hover{color:#ffc107!important}.w3-text-aqua,.w3-hover-text-aqua:hover{color:#00ffff!important}.w3-text-blue,.w3-hover-text-blue:hover{color:#2196F3!important}.w3-text-light-blue,.w3-hover-text-light-blue:hover{color:#87CEEB!important}.w3-text-brown,.w3-hover-text-brown:hover{color:#795548!important}.w3-text-cyan,.w3-hover-text-cyan:hover{color:#00bcd4!important}.w3-text-blue-grey,.w3-hover-text-blue-grey:hover,.w3-text-blue-gray,.w3-hover-text-blue-gray:hover{color:#607d8b!important}.w3-text-green,.w3-hover-text-green:hover{color:#4CAF50!important}.w3-text-light-green,.w3-hover-text-light-green:hover{color:#8bc34a!important}.w3-text-indigo,.w3-hover-text-indigo:hover{color:#3f51b5!important}.w3-text-khaki,.w3-hover-text-khaki:hover{color:#b4aa50!important}.w3-text-lime,.w3-hover-text-lime:hover{color:#cddc39!important}.w3-text-orange,.w3-hover-text-orange:hover{color:#ff9800!important}.w3-text-deep-orange,.w3-hover-text-deep-orange:hover{color:#ff5722!important}.w3-text-pink,.w3-hover-text-pink:hover{color:#e91e63!important}.w3-text-purple,.w3-hover-text-purple:hover{color:#9c27b0!important}.w3-text-deep-purple,.w3-hover-text-deep-purple:hover{color:#673ab7!important}.w3-text-red,.w3-hover-text-red:hover{color:#f44336!important}.w3-text-sand,.w3-hover-text-sand:hover{color:#fdf5e6!important}.w3-text-teal,.w3-hover-text-teal:hover{color:#009688!important}.w3-text-yellow,.w3-hover-text-yellow:hover{color:#d2be0e!important}.w3-text-white,.w3-hover-text-white:hover{color:#fff!important}.w3-text-black,.w3-hover-text-black:hover{color:#000!important}.w3-text-grey,.w3-hover-text-grey:hover,.w3-text-gray,.w3-hover-text-gray:hover{color:#757575!important}.w3-text-light-grey,.w3-hover-text-light-grey:hover,.w3-text-light-gray,.w3-hover-text-light-gray:hover{color:#f1f1f1!important}.w3-text-dark-grey,.w3-hover-text-dark-grey:hover,.w3-text-dark-gray,.w3-hover-text-dark-gray:hover{color:#3a3a3a!important}.w3-border-amber,.w3-hover-border-amber:hover{border-color:#ffc107!important}.w3-border-aqua,.w3-hover-border-aqua:hover{border-color:#00ffff!important}.w3-border-blue,.w3-hover-border-blue:hover{border-color:#2196F3!important}.w3-border-light-blue,.w3-hover-border-light-blue:hover{border-color:#87CEEB!important}.w3-border-brown,.w3-hover-border-brown:hover{border-color:#795548!important}.w3-border-cyan,.w3-hover-border-cyan:hover{border-color:#00bcd4!important}.w3-border-blue-grey,.w3-hover-border-blue-grey:hover,.w3-border-blue-gray,.w3-hover-border-blue-gray:hover{border-color:#607d8b!important}.w3-border-green,.w3-hover-border-green:hover{border-color:#4CAF50!important}.w3-border-light-green,.w3-hover-border-light-green:hover{border-color:#8bc34a!important}.w3-border-indigo,.w3-hover-border-indigo:hover{border-color:#3f51b5!important}.w3-border-khaki,.w3-hover-border-khaki:hover{border-color:#f0e68c!important}.w3-border-lime,.w3-hover-border-lime:hover{border-color:#cddc39!important}.w3-border-orange,.w3-hover-border-orange:hover{border-color:#ff9800!important}.w3-border-deep-orange,.w3-hover-border-deep-orange:hover{border-color:#ff5722!important}.w3-border-pink,.w3-hover-border-pink:hover{border-color:#e91e63!important}.w3-border-purple,.w3-hover-border-purple:hover{border-color:#9c27b0!important}.w3-border-deep-purple,.w3-hover-border-deep-purple:hover{border-color:#673ab7!important}.w3-border-red,.w3-hover-border-red:hover{border-color:#f44336!important}.w3-border-sand,.w3-hover-border-sand:hover{border-color:#fdf5e6!important}.w3-border-teal,.w3-hover-border-teal:hover{border-color:#009688!important}.w3-border-yellow,.w3-hover-border-yellow:hover{border-color:#ffeb3b!important}.w3-border-white,.w3-hover-border-white:hover{border-color:#fff!important}.w3-border-black,.w3-hover-border-black:hover{border-color:#000!important}.w3-border-grey,.w3-hover-border-grey:hover,.w3-border-gray,.w3-hover-border-gray:hover{border-color:#9e9e9e!important}.w3-border-light-grey,.w3-hover-border-light-grey:hover,.w3-border-light-gray,.w3-hover-border-light-gray:hover{border-color:#f1f1f1!important}.w3-border-dark-grey,.w3-hover-border-dark-grey:hover,.w3-border-dark-gray,.w3-hover-border-dark-gray:hover{border-color:#616161!important}.w3-border-pale-red,.w3-hover-border-pale-red:hover{border-color:#ffe7e7!important}.w3-border-pale-green,.w3-hover-border-pale-green:hover{border-color:#e7ffe7!important}.w3-border-pale-yellow,.w3-hover-border-pale-yellow:hover{border-color:#ffffcc!important}.w3-border-pale-blue,.w3-hover-border-pale-blue:hover{border-color:#e7ffff!important}</style>

    
        
    <!-- CSS -->
        <link rel="stylesheet" href="./Fermetures &amp; Macros (2)_files/font-awesome.min.css" data-external="1">
            <!-- highllighting CSS -->
    <style type="text/css">
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f8f8f8; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span.al { color: #ef2929; } /* Alert */
      code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
      code span.at { color: #c4a000; } /* Attribute */
      code span.bn { color: #0000cf; } /* BaseN */
      code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
      code span.ch { color: #4e9a06; } /* Char */
      code span.cn { color: #000000; } /* Constant */
      code span.co { color: #8f5902; font-style: italic; } /* Comment */
      code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
      code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
      code span.dt { color: #204a87; } /* DataType */
      code span.dv { color: #0000cf; } /* DecVal */
      code span.er { color: #a40000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #0000cf; } /* Float */
      code span.fu { color: #000000; } /* Function */
      code span.im { } /* Import */
      code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
      code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
      code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
      code span.ot { color: #8f5902; } /* Other */
      code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
      code span.sc { color: #000000; } /* SpecialChar */
      code span.ss { color: #4e9a06; } /* SpecialString */
      code span.st { color: #4e9a06; } /* String */
      code span.va { color: #000000; } /* Variable */
      code span.vs { color: #4e9a06; } /* VerbatimString */
      code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    </style>
    
    <!-- local CSS -->
    <style>
h2:before,h3:before,h4:before,h5:before{margin-right:1em}.footnotes:before,.scaps{font-variant:small-caps}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:16px;line-height:1.6;background-color:#f2f2f2;color:#444;counter-reset:h2}pre{margin:1em 0;padding:0}code{padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;border-radius:4px}code.sourceCode{padding:5px;display:block;border-radius:8px;background-color:transparent;color:#333}div.sourceCode{border-radius:8px;box-shadow:0 2px 4px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)!important}blockquote{border-left:4px solid #ddd;padding:0 5px;font-style:italic;font-size:95%}ul{list-style-type:"- "}a{color:#3F51B5;text-decoration:none}a:hover{border-bottom:1px solid #ccc}h2{counter-reset:h3;border-bottom:3px solid #ccc}h3{counter-reset:h4}h4{counter-reset:h5}h2:before{counter-increment:h2;content:counter(h2)}h3:before{counter-increment:h3;content:counter(h2) "." counter(h3)}h4:before{counter-increment:h4;content:counter(h2) "." counter(h3) "." counter(h4)}h5:before{counter-increment:h5;content:counter(h2) "." counter(h3) "." counter(h4) "." counter(h5)}h6:before{counter-increment:h6;content:counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) "." counter(h6) " "}h2.nocount:before,h3.nocount:before,h4.nocount:before,h5.nocount:before,h6.nocount:before{content:"";counter-increment:none;margin:0}.page-header{padding:8px 0}.page-footer{background:#fafafa;padding:5px 0 0 10px;position:fixed;margin:0;bottom:0;left:0;width:100%}td,th{padding:0 1em}table{border-collapse:collapse}th{background:#ddd}table,td,th{border:1px solid #000}.main-content{min-width:20em;max-width:750px;margin:auto}.center{text-align:center;margin:0 auto}#TOC li,#TOC ul{margin:0;padding:0}#TOC li{font-size:12px}#TOC li li{margin-left:1em}#TOC a{color:#333}.footnotes{margin-top:5px;border-top:2px solid grey;font-size:80%}.footnotes:before{content:"Notes";font-weight:700}.footnotes hr{display:none}@page{size:A4;@bottom-center {
        content: counter(page) "/" counter(pages);
        font-style: italic
    }}@media print{body{font-family:serif,"Palatino Linotype","Book Antiqua",Palatino,serif;margin:0;font-size:9pt;background-color:#fff!important;color:#000!important}h1,h2,h3,h4{page-break-after:avoid}code{page-break-inside:avoid}li,p{orphans:2;widows:2}.noprint,footer,header{display:none}.print{width:100%}}
    </style>

        <link rel="stylesheet" href="data:text/css,%2Enotions%7Bbackground%3A%23e8f3db%3Bfont%2Dsize%3A80%25%3Bpadding%3A5px%201em%3Bmargin%3A0%205em%3Bborder%2Dradius%3A8px%7D%2Enotions%20h3%2C%2Enotions%20h4%7Bcolor%3A%23008578%7D%2Enotions%20code%7Bbackground%2Dcolor%3A%23e8f3db%7D%2Enotions%20th%2C%2Enotions%20td%7Bborder%3A1px%20solid%20%23000%3Bpadding%3A5px%7D%2Eerror%2Dbox%7Bbackground%3A%23fdd%3Bfont%2Dsize%3A120%25%3Bpadding%3A5px%201em%3Bmargin%3A0%205em%3Bborder%2Dradius%3A8px%3Bcolor%3A%23e91e63%3Btext%2Dalgn%3Acenter%7D">
    
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
    <![endif]-->

    <title>Fermetures &amp; Macros (2)</title>
  </head>
  <body>
    <!-- top navpar -->
    <header>
      <div class="w3-container w3-bar w3-black page-header" style="font-size: 18px">

        <a class="w3-bar-item w3-button w3-hover-red w3-text-grey" style="margin-left: 0.2em" href="http://users.polytech.unice.fr/~eg/ProgFonc/index.html">
          Programmation Fonctionnelle
        </a>
                        <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td1</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td01/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td01/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td2</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td02/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td02/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td3</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td03/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td03/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td4</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td04/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td04/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td5</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td05/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td05/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td6</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td7</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td07/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td07/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td8</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td08/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td08/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td9</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td09/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td09/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
                <div class="w3-dropdown-hover">
          <button class="w3-button w3-hover-red w3-text-grey">Td10</button>
          <div class="w3-dropdown-content w3-bar-block w3-card-4">
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td10/sujet.html" class="w3-bar-item w3-button w3-hover-red">Sujet</a>
            <a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td10/corrige.html" class="w3-bar-item w3-button w3-hover-red">Corrigé</a>
          </div>
        </div>
              </div>
    </header>

    <div class="w3-row-padding">

      <!-- Left margin -->
      <div class="w3-quarter noprint">
        <!-- Informations -->
                <!-- Resources -->
                <ul class="w3-ul w3-card-2 w3-border" style="margin-top: 16px">
          <li class="w3-indigo">
            <i class="fa fa-file"></i> &nbsp;&nbsp;<b>Ressources</b></li>
          <li style="font-size: 12px;"><p><strong>Cours</strong><br>
1.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours01.html">Introduction</a><br>
2.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours02.html">Listes</a><br>
3.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours03.html">Functions</a><br>
4.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours04.html">Fermetures &amp; ADT</a><br>
5.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours05.html">Macros</a><br>
6.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours06.html">Langage à objets</a><br>
7.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours07.html">Flots</a><br>
8.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours08.html">Continuations</a><br>
9.&nbsp;&nbsp;&nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours09.html">Scheme en Scheme</a><br>
10.&nbsp; &nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours10.html">Outils de logique</a><br>
11.&nbsp; &nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/cours11.html">Intro Programmation logique</a><br>
12.&nbsp; &nbsp;<a href="http://users.polytech.unice.fr/~eg/ProgFonc/Cours/ARM-POLYTECH2019.pdf">Verification formelle (ARM)</a><br>
</p>
          </li>
        </ul>
                <!-- Links -->
                <ul class="w3-ul w3-card-2 w3-border" style="margin-top: 16px">
          <li class="w3-indigo">
            <i class="fa fa-external-link"></i> &nbsp;&nbsp;<b>Sites externes</b></li>
          <li style="font-size: 12px;"><p>&gt; <a href="http://schemers.org/">Schemers.org</a> <br> &gt; <a href="http://community.schemewiki.org/?scheme-faq-standards#implementations">Implementations</a></p>
          </li>
        </ul>
        
                        <!-- Toc -->
        <ul class="w3-ul w3-card-2 w3-border" style="margin-top: 16px">
          <li class="w3-gray">
            <i class="fa fa-list"></i> &nbsp;&nbsp;<b>Index</b>
          </li>
          <li id="TOC">
            <ul>
            <li><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#exercice-1-time">Exercice 1: time</a></li>
            <li><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#exercice-2-define-func">Exercice 2: define-func</a></li>
            <li><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#exercice-3-trace">Exercice 3: trace</a></li>
            <li><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#exercice-4-let-nomm%C3%A9">Exercice 4: let nommé</a></li>
            <li><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#exercice-5-hooks">Exercice 5: Hooks</a></li>
            </ul>
          </li>
        </ul>
                      </div>

      <div class="w3-threequarter print main-content">

                <div class="sc" style="margin-top: 2em; line-spacing: 1.1; font-size: 11px">
          <div>
            <big><b>Polytech Nice Sophia</b></big>
            <span class="pull-right">Programmation Fonctionnelle</span>
          </div>
          SI4 / 2020-2021<br>
          Erick Gallesio
        </div>
        
        <div class="w3-center" style="margin:32px 16px;">
                    <h1>Feuille 6</h1>
                    <h1>Fermetures &amp; Macros (2)</h1>
                  </div>
<div class="w3-card-8 w3-light-blue" style="margin:10px; padding:10px">
<p><strong>Conseils généraux pour cette feuille:</strong></p>
<ol style="list-style-type: decimal">
<li><p>La fonction non standard <code>printf</code> pourra être utile. Cette fonction est assez semblable à la fonction <code>printf</code> de C (le premier paramètre est un format et ensuite on a un nombre de paramètres variable qui dépend du format). Pour indiquer que l’on veut afficher un des paramètres on utilisera soit le format <code>~a</code>.</p>
<p><strong>Exemples:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb1-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (printf <span class="st">"Hello ~A.</span><span class="ch">\n</span><span class="st">"</span> <span class="st">"world"</span>)</span>
<span id="cb1-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-2" aria-hidden="true" tabindex="-1"></a>Hello world.</span>
<span id="cb1-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">let</span> ((x <span class="dv">1</span>) (y <span class="dv">2</span>))</span>
<span id="cb1-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-4" aria-hidden="true" tabindex="-1"></a>    (printf <span class="st">"Somme de ~A et de ~A = ~A</span><span class="ch">\n</span><span class="st">"</span> x y (<span class="op">+</span> x y))))</span>
<span id="cb1-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-5" aria-hidden="true" tabindex="-1"></a>Somme de <span class="dv">1</span> et de <span class="dv">2</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb1-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span></span></code></pre></div></li>
<li><p>la primitive <code>format</code> permet de construire une chaîne de caractères. Elle utilise les mếmes conventions que <code>printf</code> (mais cette dernière ne fait que construire la chaîne de caractères; elle n’affiche rien).</p>
<p><strong>Exemple:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb2-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">let</span> ((x <span class="dv">1</span>) (y <span class="dv">2</span>))</span>
<span id="cb2-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb2-2" aria-hidden="true" tabindex="-1"></a>     (format <span class="st">"Somme de ~A et de ~A = ~A</span><span class="ch">\n</span><span class="st">"</span> x y (<span class="op">+</span> x y)))</span>
<span id="cb2-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="st">"Somme de 1 et de 2 = 3</span><span class="ch">\n</span><span class="st">"</span>    <span class="co">;; ⟸ résultat: une chaîne</span></span></code></pre></div></li>
<li><p>Les définitions de <code>macro-expand</code> et de <code>pp</code> données dans la feuille de TD précédente pourront être utiles ici aussi. Placez les au début de votre code.</p></li>
</ol>
</div>
<p></p>
<h2 class="nocount" id="exercice-1-time">Exercice 1: time</h2>
<p>Les systèmes <em>Scheme</em> proposent généralement la forme spéciale <code>time</code> permettant d’afficher le temps CPU utilisé par l’évaluation d’une expression. <em>Racket</em> propose une telle forme (essayez pour voir), mais nous allons essayer d’écrire notre propre version.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb3-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (time (fib <span class="dv">34</span>))</span>
<span id="cb3-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-2" aria-hidden="true" tabindex="-1"></a>Elapsed time: <span class="dv">517</span>ms</span>
<span id="cb3-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dv">5702887</span></span>
<span id="cb3-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (time (fib <span class="dv">35</span>))</span>
<span id="cb3-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-5" aria-hidden="true" tabindex="-1"></a>Elapsed time: <span class="dv">1002</span>ms</span>
<span id="cb3-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="dv">9227465</span></span></code></pre></div>
<p>Pour cela, on utilisera la fonction <code>current-milliseconds</code> qui renvoie le nombre de millisecondes de CPU consommées depuis le lancement du système.</p>
<ol style="list-style-type: decimal">
<li>Pourquoi cette forme ne peut pas être implémentée avec une fonction?</li>
<li>Donner la forme macro-expansée de l’utilisation précédente de <code>time</code></li>
<li>Ecrire la macro <code>time</code></li>
</ol>
<div class="w3-card-8 w3-pale-red" style="margin:0px; padding:10px">
<header class="w3-red">
&nbsp; <span class="fa fa-info-circle"></span>&nbsp;&nbsp;&nbsp;<strong>Indications</strong>
</header>
<p>Pas vraiment de difficulté ici. Pour réaliser <code>(time expr)</code> il faut:</p>
<ol style="list-style-type: decimal">
<li>sauvegarder la valeur renvoyée par <code>current-millisecond</code></li>
<li>lancer le calcul de l’expression</li>
<li>afficher le temps pris (par différence entre le temps courant et celui sauvegardé en ①).</li>
<li>renvoyer le résultat de l’expression</li>
</ol>
</div>
<p></p>
<h2 class="nocount" id="exercice-2-define-func">Exercice 2: define-func</h2>
<p>Comme le type des paramètres d’une fonction Scheme n’est pas spécifié lors de sa définition, il n’est pas rare qu’une fonction commence par des tests sur ses paramètres. Ces tests sont donc faits à l’exécution, comme on peut le voir dans l’exemple suivant:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb4-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(puissance x y)</span>
<span id="cb4-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  (unless (<span class="kw">number?</span> x)</span>
<span id="cb4-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">error</span> <span class="st">"incorrect type for x (expected interger?)"</span>))</span>
<span id="cb4-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-4" aria-hidden="true" tabindex="-1"></a>  (unless (<span class="kw">integer?</span> y)</span>
<span id="cb4-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-5" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">error</span> <span class="st">"incorrect type for y (expected integer?)"</span>))</span>
<span id="cb4-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">;; Maintenant que les contrôles sont faits, faire le calcul (avec expt)</span></span>
<span id="cb4-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb4-7" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">expt</span> x y))</span></code></pre></div>
<p>Ici, on vérifie que les deux paramètres de la fonction <code>puissance</code> sont bien des nombres avant de se lancer dans le calcul x<sup>y</sup>. Ici, pour simplifier, on se contente d’appeler la fonction standard <code>expt</code> pour faire ce calcul (qui «marchera» puisque le type des paramètres a été vérifié auparavant).</p>
<p>Pour rendre plus simple l’écriture de telles fonctions, on veut construire la forme <code>define-func</code> permettant de définir des fonctions où les paramètres sont typés par un prédicat. Chaque paramètre d’une fonction définie avec <code>define-func</code> devra avoir la forme <code>(&lt;var&gt;&nbsp;&lt;prédicat&gt;)</code> où <code>&lt;prédicat&gt;</code> est la fonction à appliquer à <code>&lt;var&gt;</code> pour déterminer si sa valeur est correcte (notez que ce prédicat peut être beaucoup plus général qu’un simple contrôle de type – <em>e.g.</em> le paramètre est une liste de longueur 5 contenant au moins 2 nombres impairs …). Ainsi, avec <code>define-func</code> la fonction précédente peut s’écrire:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb5-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (define-func (puissance (x <span class="kw">integer?</span>) (y <span class="kw">integer?</span>))</span>
<span id="cb5-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb5-2" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">expt</span> x y))</span></code></pre></div>
<p>Quelques utilisation de la fonction <code>puissance</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb6-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (puissance <span class="dv">2</span> <span class="dv">4</span>)</span>
<span id="cb6-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span></span>
<span id="cb6-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (puissance <span class="dv">2</span> 'a)</span>
<span id="cb6-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb6-4" aria-hidden="true" tabindex="-1"></a>ERROR: incorrect type for y (expected <span class="kw">integer?</span>)</span></code></pre></div>
<p>Autre exemple:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb7-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (define-func (make-person (name <span class="kw">string?</span>) (age <span class="kw">integer?</span>) (mark <span class="kw">real?</span>))</span>
<span id="cb7-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-2" aria-hidden="true" tabindex="-1"></a>    `((name ,name) (age , age) (mark , mark)))</span>
<span id="cb7-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>(make-person <span class="st">"Alice"</span> <span class="dv">42</span> <span class="fl">17.2</span>)</span>
<span id="cb7-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-5" aria-hidden="true" tabindex="-1"></a>((name <span class="st">"Alice"</span>) (age <span class="dv">42</span>) (mark <span class="fl">17.2</span>))</span>
<span id="cb7-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (make-person 'Bob <span class="dv">50</span> <span class="fl">14.5</span>)</span>
<span id="cb7-8"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb7-8" aria-hidden="true" tabindex="-1"></a>ERROR: incorrect type for name (expected <span class="kw">string?</span>)</span></code></pre></div>
<div class="w3-card-8 w3-pale-red" style="margin:0px; padding:10px">
<header class="w3-red">
&nbsp; <span class="fa fa-info-circle"></span>&nbsp;&nbsp;&nbsp;<strong>Indications</strong>
</header>
<p>Pour construire la macro <code>define-func</code>, on peut passer par les étapes suivantes:</p>
<ol style="list-style-type: decimal">
<li><p>Pour commencer, on ne se préoccupera pas des tests (considérez qu’ils sont là comme des annotations de type que personne ne vérifie). Dans ce cas, le <code>define-func</code> précédent se contentera de s’expanser en:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb8-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(puissance x y)</span>
<span id="cb8-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb8-2" aria-hidden="true" tabindex="-1"></a>   (<span class="kw">expt</span> x y))</span></code></pre></div></li>
<li><p>Une fois que vous savez produire la définition juste au dessus, rajouter les tests qui doivent s’intercaler entre le corps de la fonction et son entête. Noter que si on a <em>n</em> paramètres, il faudra construire <em>n</em> tests.</p>
<ul>
<li>dans un premier temps, on peut se contenter de mettre un message générique (du genre <code>"incorrect type"</code>)</li>
<li>on peut ensuite construire un message adapté (cf exemple précédent) à l’aide de la primitive <code>format</code>.</li>
</ul></li>
</ol>
</div>
<dl>
<dt><strong>Facultatif</strong>:</dt>
<dd>Modifiez votre macro pour que l’on puisse, pour certains paramètres, omettre le prédicat, laissant ainsi à l’utilisateur la possibilité de ne pas contrôler certains paramètres.
</dd>
</dl>
<p></p>
<h2 class="nocount" id="exercice-3-trace">Exercice 3: trace</h2>
<p>Dans cet exercice, nous allons construire la forme spéciale <code>trace</code> permettant de rajouter une trace sur une fonction. Ce mécanisme est particulièrement utile lors du développement/debug d’une fonction.</p>
<ol style="list-style-type: decimal">
<li><p>Écrire la macro <code>trace</code> permettant d’afficher les paramètres d’une fonction au moment de son appel. Un exemple d’utilisation de cette macro est montré ci-dessous:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb9-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (trace fact)</span>
<span id="cb9-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (fact <span class="dv">4</span>)</span>
<span id="cb9-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-3" aria-hidden="true" tabindex="-1"></a> Appel de (fact <span class="dv">4</span>)</span>
<span id="cb9-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="op">...</span> Appel de (fact <span class="dv">3</span>)</span>
<span id="cb9-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-5" aria-hidden="true" tabindex="-1"></a>...... Appel de (fact <span class="dv">2</span>)</span>
<span id="cb9-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-6" aria-hidden="true" tabindex="-1"></a>......... Appel de (fact <span class="dv">1</span>)</span>
<span id="cb9-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-7" aria-hidden="true" tabindex="-1"></a>......... Résultat: <span class="dv">1</span></span>
<span id="cb9-8"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-8" aria-hidden="true" tabindex="-1"></a>...... Résultat: <span class="dv">2</span></span>
<span id="cb9-9"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="op">...</span> Résultat: <span class="dv">6</span></span>
<span id="cb9-10"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-10" aria-hidden="true" tabindex="-1"></a> Résultat: <span class="dv">24</span></span>
<span id="cb9-11"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span></span></code></pre></div></li>
<li><p><strong>Facultatif:</strong> Écrire aussi la macro <code>untrace</code> permettant d’ôter la trace associée à une fonction.</p></li>
</ol>
<div class="w3-card-8 w3-pale-red" style="margin:0px; padding:10px">
<header class="w3-red">
&nbsp; <span class="fa fa-info-circle"></span>&nbsp;&nbsp;&nbsp;<strong>Indications</strong>
</header>
<ol style="list-style-type: decimal">
<li><p>Avant d’essayer de construire la macro <code>trace</code> proprement dite, on va commencer par ajouter la trace pour une fonction. Pensez à ce que l’on avait vu pour les mémo fonctions la dernière fois: on part d’une fonction sans trace et on construit une fonction qui calcule la même chose mais avec une trace.</p>
<ul>
<li><p>Dans un premier temps, on ne s’occupera pas de l’indentation des appels (le résultat ne sera pas très lisible, mais on réglera ça plus tard). Écrire pour cela la <strong>fonction</strong> <code>simple-trace-function</code> qui prend deux paramètres (la fonction à tracer, et le nom de cette fonction — afin d’afficher de jolis messages)</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb10-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="ex">define</span><span class="fu"> fib </span>(λ (n) (<span class="kw">if</span> (<span class="op">&lt;</span> n <span class="dv">2</span>) n (<span class="op">+</span> (fib (<span class="op">-</span> n <span class="dv">1</span>)) (fib (<span class="op">-</span> n <span class="dv">2</span>))))))</span>
<span id="cb10-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">set!</span> fib (simple-trace-function fib 'fib))</span>
<span id="cb10-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (fib <span class="dv">3</span>)</span>
<span id="cb10-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-4" aria-hidden="true" tabindex="-1"></a>Calling (fib <span class="dv">3</span>)</span>
<span id="cb10-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-5" aria-hidden="true" tabindex="-1"></a>Calling (fib <span class="dv">2</span>)</span>
<span id="cb10-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-6" aria-hidden="true" tabindex="-1"></a>Calling (fib <span class="dv">1</span>)</span>
<span id="cb10-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-7" aria-hidden="true" tabindex="-1"></a>Result: <span class="dv">1</span></span>
<span id="cb10-8"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-8" aria-hidden="true" tabindex="-1"></a>Calling (fib <span class="dv">0</span>)</span>
<span id="cb10-9"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-9" aria-hidden="true" tabindex="-1"></a>Result: <span class="dv">0</span></span>
<span id="cb10-10"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-10" aria-hidden="true" tabindex="-1"></a>Result: <span class="dv">1</span></span>
<span id="cb10-11"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-11" aria-hidden="true" tabindex="-1"></a>Calling (fib <span class="dv">1</span>)</span>
<span id="cb10-12"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-12" aria-hidden="true" tabindex="-1"></a>Result: <span class="dv">1</span></span>
<span id="cb10-13"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-13" aria-hidden="true" tabindex="-1"></a>Result: <span class="dv">2</span></span>
<span id="cb10-14"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span></span></code></pre></div>
<dl>
<dt><strong>Note</strong>:</dt>
<dd>l’appel <code>(set! fib (simple-trace-function fib 'fib))</code> est assez similaire à ce que l’on avait vu dans la feuille précédente avec les memo-fonctions.
</dd>
</dl></li>
<li><p>Écrire maintenant la fonction <code>trace-function</code> qui ajoute la gestion de l’indentation à la fonction précédente, pour obtenir une trace comme celle de la fonction <code>fact</code>donnée un peu plus haut. Exemple d’utilisation sur la fonction <code>fib</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb11-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">;; Repartir d'une version vierge de toute trace</span></span>
<span id="cb11-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="ex">define</span><span class="fu"> fib </span>(λ (n) (<span class="kw">if</span> (<span class="op">&lt;</span> n <span class="dv">2</span>) n (<span class="op">+</span> (fib (<span class="op">-</span> n <span class="dv">1</span>)) (fib (<span class="op">-</span> n <span class="dv">2</span>))))))</span>
<span id="cb11-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">;; Ajouter un trace à fib (et à ses appels récursifs)</span></span>
<span id="cb11-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">set!</span> fib (trace-function fib 'fib))</span>
<span id="cb11-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">;; Appel de fib</span></span>
<span id="cb11-8"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (fib <span class="dv">3</span>)</span>
<span id="cb11-9"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  Calling (fib <span class="dv">3</span>)</span>
<span id="cb11-10"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-10" aria-hidden="true" tabindex="-1"></a> <span class="op">...</span> Calling (fib <span class="dv">2</span>)</span>
<span id="cb11-11"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-11" aria-hidden="true" tabindex="-1"></a> ...... Calling (fib <span class="dv">1</span>)</span>
<span id="cb11-12"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-12" aria-hidden="true" tabindex="-1"></a> ...... Result: <span class="dv">1</span></span>
<span id="cb11-13"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-13" aria-hidden="true" tabindex="-1"></a> ...... Calling (fib <span class="dv">0</span>)</span>
<span id="cb11-14"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-14" aria-hidden="true" tabindex="-1"></a> ...... Result: <span class="dv">0</span></span>
<span id="cb11-15"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-15" aria-hidden="true" tabindex="-1"></a> <span class="op">...</span> Result: <span class="dv">1</span></span>
<span id="cb11-16"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-16" aria-hidden="true" tabindex="-1"></a> <span class="op">...</span> Calling (fib <span class="dv">1</span>)</span>
<span id="cb11-17"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-17" aria-hidden="true" tabindex="-1"></a> <span class="op">...</span> Result: <span class="dv">1</span></span>
<span id="cb11-18"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-18" aria-hidden="true" tabindex="-1"></a>  Result: <span class="dv">2</span></span>
<span id="cb11-19"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb11-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span></span></code></pre></div>
<dl>
<dt><strong>Note:</strong></dt>
<dd><p>pour construire une chaîne de caractère comportant n fois le caractère <code>'.'</code>, vous pouvez utiliser la fonction <code>make-string</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb12-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">make-string</span> <span class="dv">5</span> <span class="ch">#\.</span>)</span>
<span id="cb12-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="st">"....."</span></span></code></pre></div>
</dd>
</dl></li>
</ul></li>
<li><p>En utilisant la <strong>fonction</strong> <code>trace-function</code> précédente, construire la <strong>macro</strong> <code>trace</code> demandée. Ça doit être <strong>très</strong> simple.</p></li>
<li><p><strong>Question facultative</strong>: Pour construire la macro <code>untrace</code>, là encore, on passera par une fonction <code>untrace-function</code>. Cette dernière cherchera dans une A-liste (voir l’exercice <em>memoïsation</em> de la feuille précédente) la fonction non-tracée associée au nom de la fonction dont on veut enlever la trace.</p></li>
</ol>
</div>
<p></p>
<h2 class="nocount" id="exercice-4-let-nommé">Exercice 4: let nommé</h2>
<p>On veut définir la forme <code class="sourceCode scheme" style="padding-left:2em; border-left: 3px solid #ccc; border-radius: 0;">(<span class="kw">let</span> &lt;label&gt; (&lt;bindings&gt;) &lt;body&gt;)</code> à l’aide d’une macro. Cette forme, définie en Scheme standard, est appelée <em>let nommé</em>; elle s’implémente avec un <code>letrec</code> et permet de définir simplement une boucle.</p>
<p>Par exemple:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb13-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> Loop ((i <span class="dv">0</span>))</span>
<span id="cb13-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  (when (<span class="op">&lt;</span> i <span class="dv">10</span>)</span>
<span id="cb13-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb13-3" aria-hidden="true" tabindex="-1"></a>     (<span class="kw">display</span> i)</span>
<span id="cb13-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb13-4" aria-hidden="true" tabindex="-1"></a>     (Loop (<span class="op">+</span> i <span class="dv">1</span>))))</span></code></pre></div>
<p>permet de définir une boucle (de nom <strong>Loop</strong>) qui travaille sur une variable locale <code>i</code> (qui est initialisée ici à 0). L’appel final de <strong>Loop</strong> permet de remonter en haut de la boucle (à l’étiquette <strong>Loop</strong>) avec la valeur <em>i+1</em>.</p>
<ol style="list-style-type: decimal">
<li><p>Quelle devrait être l’expansion du let nommé précédent?</p></li>
<li><p>Implémentez le <code>let</code> nommé à l’aide d’une macro. Notez au passage que votre macro devra aussi gérer le cas du <code>let</code> standard.</p></li>
</ol>
<div class="w3-card-8 w3-pale-red" style="margin:0px; padding:10px">
<header class="w3-red">
&nbsp; <span class="fa fa-info-circle"></span>&nbsp;&nbsp;&nbsp;<strong>Indications</strong>
</header>
<p>Comme indiqué dans le sujet, on passe par un <code>letrec</code>. Celui doit définir une fonction dont le nom est celui du <code>&lt;label&gt;</code> (normal, puisque pour remonter en haut de la boucle, on fait un appel à une fonction qui a ce nom).</p>
<p>Pour la question 2, commencez par une macro <code>named-let</code> qui ne sait gérer que les <code>let</code> nommés et passez ensuite au <code>let</code> général.</p>
</div>
<p></p>
<h2 class="nocount" id="exercice-5-hooks">Exercice 5: Hooks</h2>
<p>On veut pouvoir rajouter des comportements aux fonctions existantes sans avoir à les réécrire. Ces traitements sont eux-mêmes des fonctions qui pourront être appelées <strong>avant</strong> l’appel de la fonction originale, <strong>après</strong> son appel, ou <strong>autour</strong> de l’appel (voir les détails ci-desssous).</p>
<p>C’est la fonction générale <code>make-hook</code> qui permet de rajouter un comportement à une fonction existante. Voyons quelques exemples:</p>
<p><strong>Ajout de l’affichage d’un message <u><em>avant</em></u> l’appel de la fonction sqrt</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb14-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="ex">define</span><span class="fu"> my-sqrt </span>(make-hook 'before</span>
<span id="cb14-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-2" aria-hidden="true" tabindex="-1"></a>                             (λ (args) (printf <span class="st">"Call sqrt with ~a</span><span class="ch">\n</span><span class="st">"</span> args))</span>
<span id="cb14-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-3" aria-hidden="true" tabindex="-1"></a>                             <span class="kw">sqrt</span>))</span>
<span id="cb14-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (my-sqrt <span class="dv">10</span>)</span>
<span id="cb14-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-5" aria-hidden="true" tabindex="-1"></a>Call <span class="kw">sqrt</span> with <span class="dv">10</span></span>
<span id="cb14-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="fl">3.16227766016838</span></span></code></pre></div>
<p>Ici, on crée une fonction <code>my-sqrt</code> qui ajoute l’appel de la fonction <code class="sourceCode scheme" style="padding-left:2em; border-left: 3px solid #ccc; border-radius: 0;">(λ (args) (printf <span class="st">"Call sqrt with ~a</span><span class="ch">\n</span><span class="st">"</span> args))</code> avant d’appeler <code>sqrt</code>. Le paramètre <code>args</code> de cette fonction correspond à la liste des paramètres passés à la fonction originale.</p>
<p><strong>Ajout d’un traitement <u><em>après</em></u> avoir calculé <code>sin</code></strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb15-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> my-sin </span>(make-hook 'after</span>
<span id="cb15-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-2" aria-hidden="true" tabindex="-1"></a>                           (λ (res <span class="op">.</span> args) (<span class="kw">abs</span> res))</span>
<span id="cb15-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                           <span class="kw">sin</span>))</span>
<span id="cb15-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">sin</span> (<span class="op">-</span> (<span class="op">/</span> <span class="fl">3.14156</span> <span class="dv">2</span>)))       <span class="co">;; sinus normal</span></span>
<span id="cb15-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-5" aria-hidden="true" tabindex="-1"></a>-<span class="fl">0.999999999866718</span></span>
<span id="cb15-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (my-sin (<span class="op">-</span> (<span class="op">/</span> <span class="fl">3.14156</span> <span class="dv">2</span>)))    <span class="co">;; my-syn qui ne renvoie que des resulats ≥ 0</span></span>
<span id="cb15-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fl">0.999999999866718</span></span></code></pre></div>
<p>Ici, la fonction <code>sin</code> est tout d’abord appelée. Puis, son résultat et ses arguments sont passés à la fonction de «hook». Le résultat de la fonction de «hook» constitue le résultat de la fonction <code>my-sin</code>.</p>
<p>Noter que l’on peut ajouter un deuxième <em>hook</em> à la fonction <code>my-sin</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb16-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">set!</span> my-sin (make-hook 'after</span>
<span id="cb16-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-2" aria-hidden="true" tabindex="-1"></a>                           (λ (res <span class="op">.</span> args) (<span class="kw">min</span> res <span class="fl">0.7</span>))</span>
<span id="cb16-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-3" aria-hidden="true" tabindex="-1"></a>                           my-sin))</span>
<span id="cb16-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">sin</span> (<span class="op">-</span> (<span class="op">/</span> <span class="fl">3.14156</span> <span class="dv">2</span>)))       <span class="co">;; sinus normal</span></span>
<span id="cb16-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-5" aria-hidden="true" tabindex="-1"></a>-<span class="fl">0.999999999866718</span></span>
<span id="cb16-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (my-sin  (<span class="op">-</span> (<span class="op">/</span> <span class="fl">3.14156</span> <span class="dv">2</span>)))   <span class="co">;; résultat compris dans l'intervalle [O .. 0.7]</span></span>
<span id="cb16-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fl">0.7</span></span></code></pre></div>
<p>La fonction <code>my-sin</code> «cumule» les deux hooks sur la fonction <em>sinus</em> et son résultat est <strong>positif</strong> et limité au <strong>maximum à la valeur 0.7</strong>. La courbe de cette nouvelle fonction est donc:</p>
<center>
<img src="data:image/png;base64,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t0ceeaRHjx56a/P22muv3X///XfddVfXrl3nzZuXkpLy/vvv6xs1XR999NHp06dXrFjRs2fPZ5999pprrlmz5tIP3aJGmZmZWVlZa9eubdOmzc9//vM//OEPjXovS33grcbbihUr0tPTFy1a1LVr1zlz5qSnp2/fvl3fqFmiqtE0QGVpnN67du1at9u9devWffv2XX311fpGzdKmTZtatGhx4403GosTJkz417/+VX2TZu2jjz7avHnzf/zHf+grmrfnn3/+scceKykpMRYtFovz4s8FNQebN28eOHBgixYtjMVhw4Zt3ry5+ibQdevW7auvvkpISPjhhx+U8dOXLpe+UTPGW02Nvvjii3HjxnkWv/nmm7rPuWw+qGo0DVBZpqWlzZkzZ+rUqS1atBg0aNCMGTNGjRqlb9QsZWdnd+7c+fXXX+/atWtycvJDDz3EeZYexcXFkydPXr16tXaxNnr37p2SkrJ//36l1GeffbZnz57rr79e36jpOnXqlPli1eTk5JMnT5rWowaxsbFDhw5VSrVr187tdi9btqxZPWfqxltNbbKzsx0Ox7hx4+Li4q6++uovv/xS36K5oqrRhKKy/Omnn85edP78+crKyh9++OGJJ57Ytm3bSy+99PzzzzfbPXOVlZWekSkrKzt37lx2dvbSpUtXrVq1evXqf/7zn4899pj+N82D2+32jIxxR8knn3zy5ptv5vNPKVVYWGiMTF5enqcxPT390KFD99xzz+TJkzMyMkybN3GlpaVRpl+Ti4qKqqioMK1HXVJSUmbMmLFz587//M//1Nc1V7zV1ObcuXNPP/10//79P/7442HDht1yyy3etz9snqhqNKG469DMmTOXLFliPN60adOWLVsOHDjwxhtv5OXlTZkyZd++ffPmzWueBf5HH310++23G48XLlzYokWLoqKiv/3tb8nJyQ6Hw+12//KXv3zppZcitJ+ubgaKioqSkpKMx6NHj54xY8aHH374/fffV9+qmRoxYsTOnTuVUlFRUZ6bgWdnZ48aNWrAgAHLli2rtnVTFx0dbS4lKyoqWrZsaVqPuvz+979fvnz5hx9+2K1bN31ds/TFF1/wVlObiIiIW2655ZlnnlFKDRky5Kuvvnr99de5zFQptXLlSqoas0BKFuvF3wP10UMPPeQ5G6NXr17Lli3r3bu3UurTTz8dP378VVdd9Y9//KPaH/jD387URiTH35ChQ4d6vtl069Zty5YtLVq0SE1NzcrK6tu3b+/evauqqk6fPn3hN5f85G9natMgOQ6HwzMyrVu3XrNmzcmTJ80/VGWxWF5//fV77rnH0+IXvzpTG5EQ5X/Oyy+/fO7cOaWU5zdhs7KybrzxxuHDh69bty7I7yH+dqZGIiHKt5z27dubLyPIzc31/L6cLF864wuRnOBD3G73Qw899MYbb6xfv/66667TV/sj+M4YwiHn3Xff5a2mNu3atevTp49nsVevXsePHzet90+QnfEQyQkyZOvWrVQ1ZoF8CPl7rndaWpr5R2Xatm1rXDZlvJ3t3bu3S5cunrX+8rcztRHJ8TckKSnJc72OUspisZSXl+/bt88oJffu3duyZUvPrjt/+duZ2jRITkREhHlknn766fvvv994vGvXrnvvvXfHjh1+/W6Vxq/O1EYkRPmfM2jQIPNiTk7O6NGjR48evXbtWk+tGTB/O1MjkRDlW86QIUNWrVpVWVkZGRmplPr666/NzxxBvnTGFyI5wYfMnj37zTff/PTTTwcOHKiv81PwnTGEQw5vNXUYMmTIjh07PIt79+694447TOv9E2RnPERyggyhqtEEUlkG6Xe/+92yZctmz57929/+9o033lixYsUbb7yhb9QsderUafz48ffee+/KlSv37dv3xBNP3H///cbnZTPXvn17o9qurKw0jv82q1MJ6/boo4+6XK7x48d79vJ27ty5e/fu1bdqskaPHp2QkDBx4sSnn376v//7v3fs2LFu3Tp9I1SXlZW1YMGCqVOn5ufnf/zxx0bjqFGjgv9m0tjxVlOHadOmDRo0aMmSJWPGjFm7du2BAwfuvfdefaNmiapG0wCVZa9evT755JMZM2a88MILnTp1Wrly5dixY/WNmqs//elPjz766A033GC1Wn/9619zWr3GfM0KlFJVVVV///vfz58/f+utt3oan3jiicWLF5u2asrsdvsHH3wwceLEq6++Oi0t7R//+EdgZ480K++9957L5VqyZInnDHil1Llz5xwOh2mrZo23Gm/9+vV7//33p0+fPmPGjN69e69fv75Dhw76Rs0SVY2mASpLpdSIESO2bNmit0KpmJiY1atXr169Wl8BpZRSeXl5gwcPdrvd+ormym63V1VV6a3NTI8ePb755hu9FbWbM2fOnDlz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" width="70%&quot;">
</center>
<p><strong>Ajout d’un traitement <u><em>autour de</em></u> la fonction <code>fact</code></strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb17-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (<span class="kw">set!</span> fact (make-hook 'around</span>
<span id="cb17-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-2" aria-hidden="true" tabindex="-1"></a>                       (λ (fct <span class="op">.</span> args)</span>
<span id="cb17-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-3" aria-hidden="true" tabindex="-1"></a>                         (printf <span class="st">"Calling arguments: ~a</span><span class="ch">\n</span><span class="st">"</span> args)</span>
<span id="cb17-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-4" aria-hidden="true" tabindex="-1"></a>                         (<span class="kw">let</span> ((res (apply fct args)))</span>
<span id="cb17-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-5" aria-hidden="true" tabindex="-1"></a>                           (printf <span class="st">"Résult: ~a</span><span class="ch">\n</span><span class="st">"</span> res)</span>
<span id="cb17-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-6" aria-hidden="true" tabindex="-1"></a>                           res))</span>
<span id="cb17-7"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-7" aria-hidden="true" tabindex="-1"></a>                       fact))</span>
<span id="cb17-8"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> (fact <span class="dv">4</span>)</span>
<span id="cb17-9"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-9" aria-hidden="true" tabindex="-1"></a>Calling arguments: (<span class="dv">4</span>)</span>
<span id="cb17-10"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-10" aria-hidden="true" tabindex="-1"></a>Calling arguments: (<span class="dv">3</span>)</span>
<span id="cb17-11"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-11" aria-hidden="true" tabindex="-1"></a>Calling arguments: (<span class="dv">2</span>)</span>
<span id="cb17-12"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-12" aria-hidden="true" tabindex="-1"></a>Calling arguments: (<span class="dv">1</span>)</span>
<span id="cb17-13"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-13" aria-hidden="true" tabindex="-1"></a>Résult: <span class="dv">1</span></span>
<span id="cb17-14"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-14" aria-hidden="true" tabindex="-1"></a>Résult: <span class="dv">2</span></span>
<span id="cb17-15"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-15" aria-hidden="true" tabindex="-1"></a>Résult: <span class="dv">6</span></span>
<span id="cb17-16"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-16" aria-hidden="true" tabindex="-1"></a>Résult: <span class="dv">24</span></span>
<span id="cb17-17"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span></span></code></pre></div>
<p>Ici la fonction de «hook» est appelée avec la fonction à surcharger et les arguments de l’utilisateur. On voit que l’on peut reconstruire facilement avec des «hooks» la fonction <code>trace</code> que l’on avait définie précédemment.</p>
<div class="w3-card-8 w3-pale-red" style="margin:0px; padding:10px">
<header class="w3-red">
&nbsp; <span class="fa fa-info-circle"></span>&nbsp;&nbsp;&nbsp;<strong>Indications</strong>
</header>
<p><strong>L’implémentation de <code>make-hook</code> ne nécessite pas de macro</strong></p>
<p>C’est plus long à expliquer qu’à implémenter <span class="emoji" data-emoji="wink">😉</span>. En fait la fonction <code>make-hook</code> est une fonction qui renvoie toujours une fonction (sa forme dépend du type de hook). La fonction <code>make-hook</code> ressemble à:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode scheme"><code class="sourceCode scheme"><span id="cb18-1"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="ex">define</span><span class="fu"> </span>(make-hook where hook fct)</span>
<span id="cb18-2"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">case</span> where</span>
<span id="cb18-3"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-3" aria-hidden="true" tabindex="-1"></a>    ((before) (λ …))    <span class="co">;; ①</span></span>
<span id="cb18-4"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-4" aria-hidden="true" tabindex="-1"></a>    ((after)  (λ  …))   <span class="co">;; ②</span></span>
<span id="cb18-5"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-5" aria-hidden="true" tabindex="-1"></a>    ((around) (λ …))    <span class="co">;; ③</span></span>
<span id="cb18-6"><a href="http://users.polytech.unice.fr/~eg/ProgFonc/Tds/Td06/sujet.html#cb18-6" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">else</span>     (<span class="kw">error</span> <span class="st">"WHERE is incorrect"</span>))))</span></code></pre></div>
<ul>
<li>En ①, il faut renvoyer une fonction qui appelle <code>hook</code> puis la fonction de faut renvoyer une fonction l’utilisateur <code>fct</code>.</li>
<li>En ②, il faut renvoyer une fonction qui appelle la <code>hook</code> avec le résultat de l’appel de <code>fct</code> en premier paramètre.</li>
<li>En ③, il faut renvoyer une fonction qui appelle <code>hook</code> avec la <code>fct</code> en premier paramètre.</li>
</ul>
</div>
<div class="w3-card-8 w3-deep-purple w3-center" style="margin:30px; padding:10px">
<p><big><strong><span class="fa fa-clock-o fa-lg"></span> À suivre</strong></big></p>
</div>
      </div>
    </div>
    <footer>
      <div class="w3-container"> &nbsp;</div>
      <div class="page-footer">
        <small>
          <b>Programmation Fonctionnelle</b> — Erick Gallesio
          <span class="pull-right">17-Mar-2021 21:35 (eg)&nbsp;&nbsp;</span>
        </small>
      </div>
    </footer>
  

</body></html>